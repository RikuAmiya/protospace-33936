# アプリケーション名
・MOTTA

# 概要
・飲食店や農家等で見られるフードロスを少しでも削減できるようにと思い作成した。

# 実装要件
## ユーザー管理機能
### 実装概要
- Deviseの導入を行う。新規登録/ログイン/ログアウトができるまで実装する。モデルの単体テストまでを行う

### 実装方針
- ブランチを作成する  
- Deviseを導入する  
- ユーザー管理機能を実装する  
- モデルの単体テストコードを書く  
- プルリクエストを作成して、マージをする  
- デプロイをする  

### 実装条件
- モデルにてバリデーションの記述を行うこと  
- 必要な情報を適切に入力すると、新規登録/ログインができること  
- 新規登録・ログイン共にエラーハンドリングができていること  
- エラーハンドリングの際、1つのエラーに対して同じエラーメッセージが重複して表示されないこと  

### 新規登録/ユーザー情報
- 名前が必須であること  
- メールアドレスが必須であること  
- メールアドレスが一意性であること  
- メールアドレスは、@を含む必要があること  
- パスワードが必須であること  
- パスワードは、6文字以上での入力が必須であること（6文字が入力されていれば、登録が可能なこと）  
- パスワードは、半角英数字混合での入力が必須であること（半角英数字が混合されていれば、登録が可能なこと）  
- パスワードは、確認用を含めて2回入力すること  
- パスワードとパスワード（確認用）は、値の一致が必須であること  

### トップページ
- ログアウト状態では、ヘッダーに新規登録/ログインボタンが表示されること  
- ログイン状態では、ヘッダーにユーザーのニックネーム/ログアウトボタンが表示されること  
- ヘッダーの新規登録/ログインボタンをクリックすることで、各ページに遷移できること  
- ヘッダーのログアウトボタンをクリックすることで、ログアウトができること  


## 商品出品機能
### 実装概要
- 商品の情報が保存できるように実装し、単体テストを行う

### 実装方針
- ブランチを作成する  
- 商品出品機能を実装する  
- モデルの単体テストコードを書く  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
- ログイン状態のユーザーのみ、商品出品ページへ遷移できること  
- ログアウト状態のユーザーは、商品出品ページへ遷移しようとすると、ログインページへ遷移すること  
- 商品画像を1枚以上つけることが必須であること  
- 商品名が必須であること  
- 商品の説明が必須であること  
- カテゴリーの情報が必須であること  
- 都道府県の情報が必須であること  
- 出品地の住所の情報が必須であること  
- 販売価格は、¥1~¥9,999,999の間のみ保存可能であること  
- 販売価格は半角数字のみ保存可能であること  
- 必要な情報を適切に入力すると、商品情報がデータベースに保存されること  
- エラーハンドリングができていること  
- エラーハンドリングの際、1つのエラーに対して同じエラーメッセージが重複して表示されないこと  


## 商品一覧表示機能
### 実装概要
出品された商品はトップページに一覧で表示されること。

### 実装方針
- ブランチを作成する  
- 商品一覧表示機能を実装する  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
- 出品した商品の一覧表示ができていること  
- 画像が表示されており、画像がリンク切れなどになっていないこと  
- ログアウト状態のユーザーでも、商品一覧表示ページを見ることができること  
- 上から、出品された日時が新しい順に表示されること  
- 「画像/価格/商品名/カテゴリー」の4つの情報について表示できていること  


## 商品詳細表示機能
### 実装概要
- 商品詳細表示ページにて、商品の詳細情報を表示する。

### 実装方針
- ブランチを作成する  
- 商品詳細表示機能を実装する  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
-  商品出品時に登録した情報（商品名・商品画像・販売価格・都道府県・住所・商品説明・出品者名・カテゴリー）が、で出力されること  
- 画像が表示されており、画像がリンク切れなどになっていないこと  
- ログイン状態の出品者のみ、「商品の編集」「削除」ボタンが表示されること  
- ログアウト状態のユーザーでも、商品詳細表示ページを閲覧できること  
- ログアウト状態のユーザーには、「商品の編集」「削除」ボタンが表示されないこと  


## 商品情報編集機能
# 実装概要
- 画像を含む商品の情報を編集する機能を実装する

### 実装方針
- ブランチを作成する  
- 商品情報編集機能を実装する  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
- ログイン状態の出品者のみ、出品した商品の商品情報を編集できること  
- 必要な情報を適切に入力すると、商品情報（商品画像・商品名・商品情報など）を変更できること  
- 何も編集せずに更新をしても画像無しの商品にならないこと  
- ログイン状態の出品者のみ、出品した商品の商品情報編集ページに遷移できること  
- ログイン状態のユーザーであっても、URLを直接入力して出品していない商品の商品情報編集ページへ遷移しようとすると、トップページに遷移すること  
- ログアウト状態のユーザーは、URLを直接入力して商品情報編集ページへ遷移しようとすると、ログインページに遷移すること  
- 商品出品時とほぼ同じ見た目で商品情報編集機能が実装されていること  
- 商品名やカテゴリーの情報など、すでに登録されている商品情報は商品情報編集画面を開いた時点で表示されること  
- エラーハンドリングができていること  
- エラーハンドリングの際、1つのエラーに対して同じエラーメッセージが重複して表示されないこと  


## 商品削除機能
### 実装概要
- 商品の情報を削除する機能を実装する。

### 実装方針
- ブランチを作成する  
- 商品削除機能を実装する  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
- ログイン状態の出品者のみ、出品した商品情報を削除できること


## コメント機能
### 実装概要
- 商品に対しコメントをする機能を実装から単体テストまで行う

### 実装方針
- ブランチを作成する  
- コメント機能を実装する。  
- モデルの単体テストコードを書く  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
-ログイン中の出品者のみコメントできること  
-ログインしている時のみ投稿フォームが表示されること。  


## ユーザー詳細情報機能
### 実装概要
ユーザー詳細情報機能を実装

### 実装方針
- ブランチを作成する  
- ユーザー詳細情報機能を実装する。  
- モデルの単体テストコードを書く  
- プルリクエストを作成し、マージをする  
- デプロイをする  

### 実装条件
-各ページのユーザー名をクリックすると詳細ページに移行すること  
-必要な情報が全て表示されていること  

# ER図
![image](https://user-images.githubusercontent.com/77384318/110062235-3c08f900-7dac-11eb-9d07-7ed742fc27cd.png)


# テーブル設計

## usersテーブル

| Column     | Type    | Options     |
|------------|---------|-------------|
| email      | string  | null: false, unique: true|
| password   | string  | null: false |
| name       | string  | null: false |
| user_text  | text    |             |
| image      | string  |             |
| phone      | string  | null: false |

### Association

- has_many :items
- has_many :comments

## itemsテーブル

| Column      | Type       | Options     |
|-------------|------------|-------------|
| food        | string     | null: false |
| item_text   | text       | null: false |
| price       | integer    | null: false |
| area_id     | integer    | null: false |
| address     | string     | null: false |
| category_id | integer    | null: false |
| user        | references | null: false foreign_key: true |

### Association

- belongs_to :user
- has_many :comments

## commentsテーブル

| Column       | Type       | Options     |
|--------------|------------|-------------|
| comment_text | text       | null: false |
| food         | references | null: false foreign_key: true |
| customer     | references | null: false foreign_key: true |
### Association

- belongs_to :items
- belongs_to :users